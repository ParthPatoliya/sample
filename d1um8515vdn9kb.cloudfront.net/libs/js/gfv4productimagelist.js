(()=>{"use strict";const f=function(e){var t=new RegExp(/[`"'()#]/g);return e.replace(t,"_")};var g=function(e){var t=!1;return t=/\.(gif|jpe?g|tiff|png|webp|bmp)$/i.test(e)?!0:t},p=function(e){for(var t=[],i=0;i<e.length;i++)e[i]&&t.push(e[i]);return t};function n(e,t,i){if(e&&null!=t){var a=t;if(!!(o=e)&&(-1!=o.indexOf("cdn.shopify.com/s/files/")||-1!=o.indexOf("apps.shopifycdn.com/"))){var o="",n=e.split("?"),n=(n&&n.length&&2<=n.length&&(o=n[1]),n[0].split("/").pop()),n=null==n?void 0:n.split("."),r=null==n?void 0:n.pop();if(r&&-1!==["jfif"].indexOf(r))return e;for(var d,n=null==n?void 0:n.join("."),u=null==n?void 0:n.split("_"),s=(u&&2<=u.length&&(u=u.pop(),d=new RegExp(/(\d+)x(\d+)|(\d+)x|x(\d+)/,"gm"),u)&&d.test(u)&&""==u.replace(d,"")&&(null!=(u=null==n?void 0:n.split("_"))&&u.pop(),n=null==u?void 0:u.join("_")),e.split("?")[0].split("/")),l="",c=0;c<s.length-1;c++)l+=s[c]+"/";e=t?l+n+"_"+t+"."+r:l+n+"."+r,o&&(e=e+"?"+o)}!(d=e)||-1==d.indexOf("ucarecdn.com/")&&-1==d.indexOf("cdn.gempages.net/")||(e=function(e,t){var i,a=p(new URL(e).pathname.split("/")),o=a[0],o=(g(e)&&(i=a.pop()),a=new URL(e).pathname.includes("//")?new URL(e).origin+"//".concat(o):new URL(e).origin+"/".concat(o),new URL(e).pathname.split("/-"));if(o&&o.length){var n=o.length,r=o.slice(1,n);r&&r.length&&(o=r[r.length-1],i&&o.includes(i)&&(o=o.replace(i,"")),r[r.length-1]=o),i=i&&f(i),r.find(function(e){return e.includes("preview")})||r.unshift("/preview");for(var d=0;d<r.length;d++){var u,s=r[d];"/"==r[d][0]&&(s=r[d].slice(1,s.length)),(s="/"==r[d][s.length-1]?r[d].slice(0,s.length-1):s).includes("preview")&&(s=r[d],t.includes("x")?(u=t.split("x"))&&u.length&&1==(u=u.filter(function(e){return e.trim().length})).length&&(t=u[0]+"x"+u[0]):isNaN(parseInt(t))||(t=t+"x"+t),s="/preview/".concat(t),r&&1==r.length&&"/preview"==r[0]&&(s+="/"),r[d]=s)}e=a+"/-"+r.join("/-"),i&&!g(e)&&(n=!1,e=(n="/"==(o=r.join("/-")).charAt(o.length-1)?!0:n)?a+"/-"+o+"".concat(i):a+"/-"+r.join("/-")+"/".concat(i))}return e}(e,a))}return e}var o=function(){return(o=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.create;Object.create;function e(){Object.defineProperty(this,"gfFirstLoadVimeo",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"gfFirstLoadYoutube",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"gfLoadedVimeo",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"gfLoadedYoutube",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"gfLoadingVimeoList",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"gfLoadingYoutubeList",{enumerable:!0,configurable:!0,writable:!0,value:[]}),window.gfListVideoPlayer={},window.gfCurrentVideoPlayer=""}Object.defineProperty(e.prototype,"newYoutube",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){window.gfListVideoPlayer[e]?(window.gfCurrentVideoPlayer=e,i(e)):window.gfListVideoPlayer[e]=new window.YT.Player(e,{videoId:t,playerVars:{autoplay:0,autohide:1,modestbranding:1,rel:0,showinfo:0,controls:1,disablekb:1,enablejsapi:0,iv_load_policy:3,hd:1},events:{onReady:function(){window.gfCurrentVideoPlayer=e,i&&i(e)}}})}}),Object.defineProperty(e.prototype,"loadYoutube",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){var a,o=this;i=i||function(){},this.gfLoadedYoutube||window.YT&&window.YT.loaded?this.newYoutube(e,t,i):(this.gfLoadingYoutubeList.push({targetId:e,videoId:t,callback:i}),a=function(){},window.onYouTubeIframeAPIReady&&(a=window.onYouTubeIframeAPIReady),window.onYouTubeIframeAPIReady=function(){o.gfLoadedYoutube=!0;for(var e=0;e<o.gfLoadingYoutubeList.length;e++)o.newYoutube(o.gfLoadingYoutubeList[e].targetId,o.gfLoadingYoutubeList[e].videoId,o.gfLoadingYoutubeList[e].callback);a()},this.gfFirstLoadYoutube&&(this.gfFirstLoadYoutube=!1,e="https://www.youtube.com/iframe_api",0==jQuery(document).find("script[src^='"+e+"']").length)&&((t=document.createElement("script")).onload=function(){},(i=document.getElementsByTagName("script")[0]).parentNode.insertBefore(t,i),t.src=e))}}),Object.defineProperty(e.prototype,"newVimeo",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){window.gfListVideoPlayer[e]?(window.gfCurrentVideoPlayer=e,i&&i(e)):(t={url:t,loop:!1,autoplay:!1,title:!1,byline:!1},Object(t).responsive=!0,a&&Object.keys(a).length&&(t=o(o({},t),a)),window.gfListVideoPlayer[e]=new window.Vimeo.Player(e,t),window.gfListVideoPlayer[e].on("loaded",function(){window.gfCurrentVideoPlayer=e,i&&i(e)}))}}),Object.defineProperty(e.prototype,"loadVimeo",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,a){var o=this;i=i||function(){},this.gfLoadedVimeo||window.Vimeo?this.newVimeo(e,t,i,a):(this.gfLoadingVimeoList.push({targetId:e,videoUrl:t,callback:i,args:a}),this.gfFirstLoadVimeo&&(this.gfFirstLoadVimeo=!1,e="https://player.vimeo.com/api/player.js",0==jQuery(document).find("script[src^='"+e+"']").length)&&((t=document.createElement("script")).onload=function(){o.gfLoadedVimeo=!0;for(var e=0;e<o.gfLoadingVimeoList.length;e++)o.newVimeo(o.gfLoadingVimeoList[e].targetId,o.gfLoadingVimeoList[e].videoUrl,o.gfLoadingVimeoList[e].callback,o.gfLoadingVimeoList[e].args)},(i=document.getElementsByTagName("script")[0]).parentNode.insertBefore(t,i),t.src=e))}}),Object.defineProperty(e.prototype,"newHtml5Video",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i){if(window.gfListVideoPlayer[e])window.gfCurrentVideoPlayer=e,i&&i(e);else{for(var a=e+"-video",o='<video id="'+a+'" controls>',n=0;n<t.length;n++)o+='<source src="'+t[n].src+'" type="'+t[n].type+'">';o+="Your browser does not support HTML5 video.</video>";var r=$("#"+e);r.html(o),window.gfListVideoPlayer[e]=r.find("#"+a).on("loadstart",function(){window.gfCurrentVideoPlayer=e,i&&i(e)})}}}),Object.defineProperty(e.prototype,"pauseCurrentVideo",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;window.gfCurrentVideoPlayer&&window.gfListVideoPlayer&&(e=window.gfListVideoPlayer[window.gfCurrentVideoPlayer])&&(null!=e.pause?e.pause():e[0]&&null!=e[0].pause?e[0].pause():null!=e.pauseVideo&&e.pauseVideo())}}),Object.defineProperty(e.prototype,"playCurrentVideo",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;window.gfCurrentVideoPlayer&&window.gfListVideoPlayer&&(e=window.gfListVideoPlayer[window.gfCurrentVideoPlayer])&&(null!=e.play?e.play():e[0]&&null!=e[0].play?e[0].play():null!=e.playVideo&&e.playVideo())}});var h,t=new e,i=window.GemQuery||jQuery;window.GEMMEDIA&&0!==Object.keys(window.GEMMEDIA).length||(window.GEMMEDIA=t),(h=i).gfV4ProductImageList=function(e,t){var i,a={startAtFirstImage:!1},l=(this.settings={},h(e)),u=this,c=0,o=0,f=0,g="default",s=!1;this._syncImageList=1,this._syncImageListXs=0,this.$parentProduct,this.wrapProductId="",this.init=function(){this.settings=h.extend({},a,t),i=parseInt(l.attr("data-video-inline")||"0"),o=parseInt(l.attr("data-3D-model")||"0"),f=parseInt(l.attr("data-gallery")||"0"),c=parseInt(l.attr("data-borderactive")||"0"),g=l.attr("data-style")||"default",s=this.settings.startAtFirstImage,this.wrapProductId=this.findWrapProductId(),1==c&&this.initActiveImage(),"slider"==g&&this.initActiveImageSlider(),this.applyEvents(),this.subscribeMediaData(),this.subscribeGoToThumb(),this._syncImageList=parseInt(l.attr("data-sync-il")||"1"),this._syncImageListXs=parseInt(l.attr("data-sync-il-xs")||"1"),1==f?l.gfV4Lightbox():1!=i&&void 0!==l.attr("data-video-inline")||u.initVideo()},this.gotoIndex=function(e,t){return"slider"==g&&(t=null!=t?t:250,l.find(".gf_product-images-list").trigger("to.owl.carousel",[e,t,!0])),1==c&&(l.find(".item").removeClass("gf_product-image-thumbactive"),l.find('[data-index="'.concat(e+1,'"]')).closest(".item").addClass("gf_product-image-thumbactive")),!1},this.gotoThumb=function(e,t){var i=0,a=u.getVariantImage(e);if(a){var o=u.convertRawSrc(a);if("slider"==g){var n,t=null!=t?t:250;if(!(n=l.find(".owl-item:not(.cloned) .gf_product-image-thumb")).length)return void l.find(".owl-carousel").on("initialized.owl.carousel",function(){setTimeout(function(){u.gotoThumb(e,250)},16)});if(s)i=0,s=!1;else for(var r=0;r<n.length;r++)if((d=n.eq(r).attr("data-image"))&&o==u.convertRawSrc(d)){i=r;break}l.find(".gf_product-images-list").trigger("to.owl.carousel",[i,t,!0])}else if((n=l.find(".gf_product-image-thumb")).length)for(var d,r=0;r<n.length;r++)if((d=n.eq(r).attr("data-image"))&&-1!=d.indexOf(a)){i=r;break}1==c&&(l.find(".item").removeClass("gf_product-image-thumbactive"),l.find('[data-index="'.concat(i+1,'"]')).closest(".item").addClass("gf_product-image-thumbactive"))}},this.getVariantImage=function(e){var t="",i=this.findParentProduct();if(0<i.find(".product-json").length)null!=e.featured_image&&null!=e.featured_image.src&&(t=e.featured_image.src);else try{var a=i.attr("data-pid");if(null!=window.parent.jQuery("#gfFrame").contents().find(".gryffeditor").data("gryffeditor")){var o=window.parent.jQuery("#gfFrame").contents().find(".gryffeditor").data("gryffeditor").searchProductInList(a);null!=o.images[0]&&(t=o.images[0].src);for(var n=0;n<o.images.length;n++)if(-1!==h.inArray(e.id,o.images[n].variant_ids)){null!=o.images[n]&&(t=o.images[n].src);break}}}catch(e){console.log(e.message)}return t},this.initVideo=function(){var o=[],n=[];if(l.find(".gf_product-video-thumb").each(function(){var e,t=h(this),i=t.attr("id")||"",a=t.attr("data-video")||"";i&&(i&&a&&-1!=a.indexOf("vimeo.com/")?o.push({targetId:i,videoUrl:a}):!a||-1==a.indexOf("youtu.be")&&-1==a.indexOf("youtube.com")?(e=t.attr("data-video-host")||"",t=t.attr("data-video-id")||"",!a&&"youtube"==e&&t&&n.push({targetId:i,videoId:t}),!a&&"vimeo"==e&&t&&o.push({targetId:i,videoUrl:t})):(e="",t=[],(e=(t=-1!=a.indexOf("youtu.be/")?a.split("youtu.be/"):a.split(/watch\?v=/))&&null!=t[1]?t[1].split(/&/)[0]:e)&&n.push({targetId:i,videoId:e})))}),o.length)for(var e=0;e<o.length;e++)window.GEMMEDIA&&window.GEMMEDIA.loadVimeo(o[e].targetId,o[e].videoUrl);if(n.length)for(e=0;e<n.length;e++)window.GEMMEDIA&&window.GEMMEDIA.loadYoutube(n[e].targetId,n[e].videoId)},this.initActiveImageSlider=function(){var e=u.findParentProduct();null!=e.data("gfv3product")&&(e=e.data("gfv3product").getVariant(),u.gotoThumb(e))},this.initActiveImage=function(){var e,i,t=u.findParentProduct();null!=t.data("gfv3product")&&(e=t.data("gfv3product").getVariant(),(i=u.getVariantImage(e))||(e=t.find('[data-label="(P) Image"]')).length&&(i=e.find(".gf_featured-image").attr("src")),i=i&&u.convertRawSrc(i),l.find(".gf_product-image-thumb").each(function(){var e=h(this),t=e.attr("src")||"";(t=t||e.attr("data-image")||"")&&(t=u.convertRawSrc(t))==i&&e.closest(".item").addClass("gf_product-image-thumbactive")}))},this.applyEvents=function(){var s=this,e="click",e=767<(h(window).width()||0)?"click.gem":"mouseup.gem";return l.find(".gf_product-image-thumb, .gf_product-video-thumb").closest("a").off(e).on(e,function(){var e,t,i,a=h(this),o=(l.find(".gf_product-image-thumb").closest("a").removeClass("gf_product-image-thumbactive"),1==c&&a.addClass("gf_product-image-thumbactive"),a.find(".gf_product-image-thumb")),n=a.index(),r=(0<a.closest(".owl-item").length&&(n=parseInt(a.attr("data-position")||"0")),""),d="image",u={},a=a.find(".gf_product-image-thumb");return o.hasClass("gf_product-video-thumb")?(r=o.attr("data-video")||"",d=o.attr("data-type")||"",e=o.attr("data-video-host"),t=o.attr("data-video-id"),d=d||"external_video",u.host=e,u.videoId=t,i=[],o.find("source").each(function(){$(this).attr("src")&&i.push({src:$(this).attr("src")||"",type:$(this).attr("type")||"video/mp4"})}),u.sources=i):o.hasClass("gf_product-model-thumb")?(d="model",r=o.data("url"),u.imageUrl=o.data("image")):o.is("video")?u=!1:(r=o.attr("data-image")||o.attr("src")||"",u.imageZoomUrl=o.attr("data-zoom")||"",u.imageAlt=o.attr("alt")||o.find("img").attr("alt")||""),1!=f&&u&&s.dispatchMediaData({index:n,id:a.attr("data-id"),url:r,type:d,data:u}),!1}),"slider"==g&&(e=l.find(".gf_product-model-thumb"),(o||e.find("model-viewer").length)&&e.off("touchstart").on("touchstart",function(e){return e.stopPropagation(),!0}),s.preventDoubleTapGestureOnMobile()),!1},this.convertRawSrc=function(e){return e=(e=(e=n(e,"100x100")).replace("https://","//").replace("http://","//")).split("?v=")[0]},this.dispatchMediaData=function(e){window.GEMSTORE&&window.GEMSTORE.dispatch("gemActiveMediaData-".concat(this.wrapProductId),e)},this.subscribeMediaData=function(){window.GEMSTORE&&window.GEMSTORE.subscribe("gemActiveMediaData-".concat(this.wrapProductId),function(e){u.gotoIndex(e.index)})},this.subscribeGoToThumb=function(){window.GEMSTORE&&window.GEMSTORE.subscribe("product-".concat(this.wrapProductId,"-variant"),function(e){u.gotoThumb(e)})},this.findWrapProductId=function(){var e=l.closest('[data-label="Product"]');return(e=0==e.length?l.closest('[data-icon="gpicon-product"]'):e).attr("id")||""},this.findParentProduct=function(){var e=l.closest('[data-label="Product"]').children(".module");return e=0==e.length?l.closest('[data-icon="gpicon-product"]').children(".module"):e},this.preventDoubleTapGestureOnMobile=function(){[].forEach(function(e){document.addEventListener(e,function(){},!1)})},this.init()},h.fn.gfV4ProductImageList=function(t){return this.each(function(){var e;null==h(this).data("gfv4productimagelist")&&(e=new h.gfV4ProductImageList(this,t),h(this).data("gfv4productimagelist",e))})}})();